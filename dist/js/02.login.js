"use strict";require.config({paths:{jquery:"../lib/js/jquery-1.10.1.min",common:"common"},shim:{}}),require(["jquery","common"],function(l){l(function(){function e(){for(var e="0987654321zxcvbnmkjhgfdsaqwertyuioplZXCVBNMLKJHGFDSAQWERTYUIOP",c="",o=0;o<4;o++){c+=e[parseInt(Math.random()*e.length)]}return c}l(".signin-title li").click(function(){var e=l(this).index();l(this).find("input").attr("checked","checked").closest("li").siblings().find("input").removeAttr("checked","checked"),l(".signin-main>div").eq(e).show().siblings().hide()}),l("#sjyzm").val(e()),l("#sjyzm").click(function(){l("#sjyzm").val(e())});var o=!1;function c(){l(this).next().html(""),l(this).css("border","1px solid #e2e2e2"),l(this).next().attr("class","")}function t(){if(""!=l("#checkphone").val().trim())return l.ajax({type:"get",url:"../api/04.checklogin.php",async:!1,data:"phone="+l("#checkphone").val(),success:function(e){var c=JSON.parse(e);console.log(c),c.dianhua?""==l("#checkpw").val().trim()?(l("#checkpw").next().html("请输入密码"),l("#checkpw").css("border","1px solid #c40000"),l("#checkpw").next().attr("class","focus error")):l.ajax({type:"get",url:"../api/04.checklogin.php",async:!1,data:"phone1="+l("#checkphone").val()+"&pw="+l("#checkpw").val(),success:function(e){JSON.parse(e).liangge?o=!0:(l("#checkpw").next().html("密码与用户名不匹配，请重新输入！"),l("#checkpw").css("border","1px solid #c40000"),l("#checkpw").next().attr("class","focus error"))}}):(l("#checkphone").next().html("您输入的账户名不存在，请核对后重新输入"),l("#checkphone").css("border","1px solid #c40000"),l("#checkphone").next().attr("class","focus error"))}}),o;l("#checkphone").next().html("请输入手机号"),l("#checkphone").css("border","1px solid #c40000"),l("#checkphone").next().attr("class","focus error")}l("#checkphone").focus(c),l("#checkpw").focus(c),l("#input_quickLogin").focus(c),l("#yzm").focus(c),l("#ptLogin").click(function(){t()&&(location.href="../index1.html",setcookie("name",l("#checkphone").val(),1))});var n=!1;function s(){if(""!=l("#input_quickLogin").val().trim())return l.ajax({type:"get",url:"../api/04.checklogin.php",async:!1,data:"phone="+l("#input_quickLogin").val(),success:function(e){var c=JSON.parse(e);console.log(c),c.dianhua?n=!0:(l("#input_quickLogin").next().html("您输入的账户名不存在，请核对后重新输入"),l("#input_quickLogin").css("border","1px solid #c40000"),l("#input_quickLogin").next().attr("class","focus error"))}}),n;l("#input_quickLogin").next().html("请输入手机号"),l("#input_quickLogin").css("border","1px solid #c40000"),l("#input_quickLogin").next().attr("class","focus error")}var i=0;var r=!1;l("#qryzm").click(function(){if(s())if(""==l("#yzm").val().trim())l("#yzm").css("border","1px solid #c40000"),l("#yzm").next().html("验证码不能为空"),l("#yzm").next().attr("class","focus error");else if(l("#yzm").val().toLowerCase()==l("#sjyzm").val().toLowerCase()){l("#yzm").next().html(""),l("#yzm").css("border","1px solid #e2e2e2"),l("#yzm").next().attr("class","");l("#sjyzm").remove(),l("#qryzm").remove(),l("#yzm").val(""),l("#duanxin").append('<input type="button" id="code_mobile" value="获取短信验证码">');var o=60;l("#code_mobile").click(function(){function e(){--o<=0?(clearInterval(c,1e3),o=60,l("#code_mobile").val("重新发送验证码"),l("#code_mobile")[0].disabled="",l("#code_mobile").css("color","#000"),l("#code_mobile").css("background","#e3e3e3")):(l("#code_mobile").val(o+"秒后可重发"),l("#code_mobile")[0].disabled="disabled",l("#code_mobile").css("color","#999"),l("#code_mobile").css("background","#eeeded"))}l.ajax({type:"post",url:"../lib/api/duanxin.php",data:"userphone="+l("#input_quickLogin").val(),success:function(e){var c=JSON.parse(e);c.phonecode&&(i=c.phonecode)}}),e();var c=setInterval(e,1e3)})}else l("#yzm").css("border","1px solid #c40000"),l("#yzm").next().html("验证码错误"),l("#yzm").next().attr("class","focus error");else l("#yzm").next().html("请输入正确的手机号"),l("#yzm").css("border","1px solid #c40000"),l("#yzm").next().attr("class","focus error")}),l("#ptLogin2").click(function(){var e=s();i?l("#yzm").val()==i?(r=!0,l("#yzm").next().html(""),l("#yzm").css("border","1px solid #e2e2e2"),l("#yzm").next().attr("class","")):(r=!1,l("#yzm").next().html("手机验证码错误"),l("#yzm").css("border","1px solid #c40000"),l("#yzm").next().attr("class","focus error")):(r=!1,""==l("#yzm").val().trim()?l("#yzm").next().html("请输入正确的验证码"):l("#yzm").val().toLowerCase()==l("#sjyzm").val().toLowerCase()?l("#yzm").next().html("请点击右侧的确认验证码"):l("#yzm").next().html("请输入正确的验证码"),l("#yzm").css("border","1px solid #c40000"),l("#yzm").next().attr("class","focus error")),console.log(e),console.log(r),e&&r&&(location.href="../index1.html",setcookie("name",l("#input_quickLogin").val(),1))})})});