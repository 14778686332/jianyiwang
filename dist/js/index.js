"use strict";require.config({paths:{jquery:"../lib/js/jquery-1.10.1.min",common:"common"},shim:{}}),require(["jquery","common"],function(u){!function(){u(window).bind("scroll resize",function(){u(window).width();400<u(window).scrollTop()?u("#toTop").slideDown("slow"):u("#toTop").slideUp("slow")}),u(".gocart").click(function(){getcookie("name")?location.href="../html/cart.html":confirm("请登录")&&(location.href="../html/login.html")});var t=new Swiper("#swiper1",{autoplay:{delay:2e3},loop:!0,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(t,e){return'<span class="'+e+'">'+(t+1)+"</span>"}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},effect:"fade"}),e=document.getElementById("swiper1"),o=document.querySelector("#swiper1 .swiper-button-prev"),n=document.querySelector("#swiper1 .swiper-button-next");e.onmouseover=function(){t.autoplay.stop(),o.style.display="block",o.style.opacity=".1",n.style.display="block",n.style.opacity=".1"},e.onmouseout=function(){t.autoplay.start(),o.style.display="none",n.style.display="none"};var a=new Swiper("#swiper2",{autoplay:{delay:3e3},slidesPerView:3,spaceBetween:0,slidesPerGroup:3,loop:!0,loopFillGroupWithBlank:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),i=document.getElementById("swiper2"),l=document.querySelector("#swiper2 .swiper-button-prev"),s=document.querySelector("#swiper2 .swiper-button-next");i.onmouseover=function(){a.autoplay.stop(),l.style.display="block",l.style.opacity=".1",s.style.display="block",s.style.opacity=".1"},i.onmouseout=function(){a.autoplay.start(),l.style.display="none",s.style.display="none"}}(),u(function(){if(getcookie("name")){var t=getcookie("name");u("#dengluhou").html("您好，"+t+"欢迎来到健一网网上药店!<a id='tc' href='index1.html'>退出</a>")}else u("#dengluhou").html('欢迎来到健一网<h1>网上药店</h1>！[ <a href="html/login.html">登录</a> ] [ <a href="html/register.html">注册</a> ]');if(getcookie("name"))u.ajax({type:"get",url:"api/index.php",data:"username="+getcookie("name"),success:function(t){var e=JSON.parse(t);if(console.log(e),e.tiao){for(var o=e.zongtiao[0]["sum(counts)"],n=0,a=0;a<e.biao.length;a++)n+=e.biao[a].counts*e.biao[a].dmoney;console.log(n);var i='<div class="zlc">\n                                    共<b>'+e.zongtiao[0]["sum(counts)"]+"</b>件商品　共计<strong>￥"+n+'.00</strong><br>\n                                    <a title="去结算" href="html/cart.html">去结算<em></em></a>\n                                    <input type="hidden" id="shopcartPatternForMini" value="gouwu">\n                                </div>',l=e.biao.map(function(t){return'<li>\n                                    <div class="w-img fl">\n                                        <a href="###">\n                                            <img src="'+t.dimg+'" width="50" height="50">\n                                        </a>\n                                    </div>\n                                    <div class="w-tit fl">\n                                        <div class="nk" style="height: 50px;">\n                                            <a href="###"> '+t.dgoodsname+'</a>\n                                            <a href="#" title="" class="orange" style="font-weight: bold;"> </a><br> <br>\n                                        </div>\n                                    </div>\n                                    <div class="w-sale fl">\n                                        <span id="sum61647-0" class="sum">'+t.dmoney+'.00</span>\n                                    </div>\n                                    <div class="w-detail fr">\n                                        <div class="asub">\n                                            <a data-id="'+t.huohao+'" href="###" class="jianhao"></a>\n                                            <input data-id="'+t.huohao+'" class="zhi" min-amount="1" type="text" value="'+t.counts+'">\n                                            <a href="###" class="jiahao" data-id="'+t.huohao+'"></a>\n                                        </div>\n                                        <a data-id="'+t.huohao+'" href="###" class="delete">删除</a>\n                                    </div>\n                                </li>'}).join("");u("#shopcarDiv .zlb").html(u("<ul></ul>").append(l)),u("#shopcarDiv").append(i),u("#cartCount").html(o),u(".jiahao").click(function(){var t=0,e=0,o=u(this).prev().val();o++,u(this).prev().val(o);for(var n=0;n<u(".zlb ul li").size();n++)t+=u(".jiahao").eq(n).parent().parent().prev().find(".sum").html()*u(".jiahao").eq(n).prev().val(),e+=1*u(".jiahao").eq(n).prev().val();u(".zlc strong").html("￥"+t+".00"),u(".zlc b").html(e),u("#cartCount").html(e),u.ajax({type:"get",url:"api/index2.php",data:"username="+getcookie("name")+"&huohao="+u(this).attr("data-id")+"&vall="+o,success:function(t){console.log(t)}})}),u(".jianhao").click(function(){var t=0,e=0,o=u(this).next().val();--o<=1&&(o=1),u(this).next().val(o);for(var n=0;n<u(".zlb ul li").size();n++)t+=u(".jianhao").eq(n).parent().parent().prev().find(".sum").html()*u(".jianhao").eq(n).next().val(),e+=1*u(".jiahao").eq(n).prev().val();u(".zlc strong").html("￥"+t+".00"),u(".zlc b").html(e),u("#cartCount").html(e),u.ajax({type:"get",url:"api/index2.php",data:"username="+getcookie("name")+"&huohao="+u(this).attr("data-id")+"&vall="+o,success:function(t){console.log(t)}})}),u(".zhi").blur(function(){for(var t=0,e=0,o=0;o<u(".zlb ul li").size();o++)t+=u(".zhi").eq(o).parent().parent().prev().find(".sum").html()*u(".zhi").eq(o).val(),e+=1*u(".jiahao").eq(o).prev().val();console.log(u(this).val()),u(".zlc strong").html("￥"+t+".00"),u(".zlc b").html(e),u("#cartCount").html(e),u.ajax({type:"get",url:"api/index2.php",data:"username="+getcookie("name")+"&huohao="+u(this).attr("data-id")+"&vall="+u(this).val(),success:function(t){console.log(t)}})}),u(".delete").click(function(){u(this).parent().parent().remove();for(var t=0,e=0,o=0;o<u(".zlb ul li").size();o++)t+=u(".zhi").eq(o).parent().parent().prev().find(".sum").html()*u(".zhi").eq(o).val(),e+=1*u(".jiahao").eq(o).prev().val();u(".zlc strong").html("￥"+t+".00"),u(".zlc b").html(e),u("#cartCount").html(e),u.ajax({type:"get",url:"api/indexdel.php",data:"username="+getcookie("name")+"&huohao="+u(this).attr("data-id"),success:function(t){if(0==t){u("#shopcarDiv .zlb").html('<div class="zla">\n                                        <em class="gwico"></em>\n                                        购物车空空如也，赶紧选购吧!\n                                    </div>'),u("#cartCount").html("0"),u(".zlc").remove()}}})})}else{u("#shopcarDiv .zlb").html('<div class="zla">\n                        <em class="gwico"></em>\n                        购物车空空如也，赶紧选购吧!\n                    </div>'),u("#cartCount").html("0")}}});else{u("#shopcarDiv .zlb").html('<div class="zla">\n                        <em class="gwico"></em>\n                        购物车空空如也，赶紧选购吧!\n                    </div>'),u("#cartCount").html("0")}u(".logo_rc").hover(function(){u(this).addClass("act"),u("#shopcarDiv").css("display","block")},function(){u(this).removeClass("act"),u("#shopcarDiv").css("display","none")}),u("#shopcarDiv").hover(function(){u(this).css("display","block"),u(".logo_rc").addClass("act")},function(){u(this).css("display","none"),u(".logo_rc").removeClass("act")}),u("#tc").click(function(){removecookie("name"),location.href="index1.html"}),u(".swiper-button-prev").hover(function(){console.log("x"),u(this).stop().animate({opacity:.6},500)},function(){u(this).stop().animate({opacity:.1},500)}),u(".swiper-button-next").hover(function(){console.log("x"),u(this).stop().animate({opacity:.6},500)},function(){u(this).stop().animate({opacity:.1},500)}),u(".xl-tit ul li").mouseover(function(){u(this).attr("class","act").siblings().attr("class",""),u(".xlqg_b .xl-products").eq(u(this).index()).css("display","block").siblings().css("display","none")});var e=u(".xgg_t").index()+1;u(".xgg_t .hd li").mouseover(function(){u(this).attr("class","on_hover").siblings().attr("class",""),u(".xgg_t:nth-child("+e+") .bd li").eq(u(this).index()).css("display","list-item").siblings().css("display","none")}),u(".tgys p a").mouseover(function(){e=u(this).index()+1,u(this).attr("class","act").siblings().attr("class",""),u(".xgg_t").eq(u(this).index()).css("display","block").siblings().css("display","none")}),console.log(u("#floorDiv1 .floorcenter").length);for(var o=function(o){u("#floorDiv"+o+" .floortitle a").mouseover(function(){var t=u("#floorDiv"+o+" .floorcenter").size();u(this).attr("class","current").siblings().attr("class",""),console.log(t);for(var e=0;e<t;e++)u("#floorDiv"+o+" .floorcenter").eq(e).css("display","none");u("#floorDiv"+o+" .floorcenter").eq(u(this).index()).css("display","block")})},n=1;n<=u(".floor").length;n++)o(n);u(".hotmend").hover(function(){u(this).find(".hd").stop().fadeIn(),clearInterval(r)},function(){u(this).find(".hd").stop().fadeOut(),r=setInterval(h,3e3)});var a=u(".hotmend .bd ul li").css("width").split("p")[0];u(".hotmend .bd ul").css("width",6*a+"px");var i=u(".yqlj .tempWarp ul li").css("height").split("p")[0];u(".yqlj .tempWarp ul").css("height",4*i+"px");var l=setInterval(s,2500);e=0;function s(){4<=++e&&(u(".yqlj .tempWarp ul").css("top",-i+"px"),e=2),u(".yqlj .tempWarp ul").animate({top:-i*e},500,"linear")}u(".yqlj .tempWarp ul li").hover(function(){clearInterval(l)},function(){l=setInterval(s,2500)});var r=setInterval(h,4e3),c=0;function h(){c++,p()}function p(){6<=c?(u(".hotmend .bd ul").css("left",-a+"px"),c=2):c<0&&(u(".hotmend .bd ul").css("left",4*-a+"px"),c=3),u(".hotmend .bd ul").animate({left:-a*c},1e3,"linear")}u(".hotmend .hd .prev").click(function(){c--,p()}),u(".hotmend .hd .next").click(function(){c++,p()})})});